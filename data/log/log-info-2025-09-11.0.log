25-09-07.17:50:56.194 [main            ] INFO  Application            - Starting Application using Java 17.0.9 with PID 5361 (/Users/didi/IdeaProjects/ai-agent-station-study/ai-agent-station-study-app/target/classes started by didi in /Users/didi/IdeaProjects/ai-agent-station-study)
25-09-07.17:50:56.195 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-07.17:50:56.742 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-07.17:50:56.749 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-07.17:50:56.750 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-07.17:50:56.750 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-07.17:50:56.771 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-07.17:50:56.771 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 563 ms
25-09-07.17:50:57.151 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-07.17:50:57.152 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-07.17:50:57.152 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-07.17:50:57.238 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-07.17:50:57.353 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-07.17:50:57.360 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-07.17:50:57.365 [main            ] INFO  Application            - Started Application in 1.385 seconds (process running for 1.743)
25-09-07.17:50:57.366 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-07.17:50:57.366 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:50:57.368 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:50:57.368 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:50:57.368 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:50:57.368 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:50:57.368 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:50:57.368 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:50:57.376 [pool-2-thread-6 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-07.17:50:57.465 [pool-2-thread-6 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@550a20ea
25-09-07.17:50:57.466 [pool-2-thread-6 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-07.17:50:57.561 [main            ] INFO  RootNode               - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:50:57.561 [main            ] INFO  AiClientApiNode        - Ai Agent 构建节点，API 接口请求{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:50:57.562 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-09-07.17:50:57.562 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:50:57.878 [HttpClient-10-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-09-07.17:50:57.955 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-09-07.17:50:57.956 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-09-07.17:51:00.091 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=mcp-server-elasticsearch, version=1.0.0] and Instructions null
25-09-07.17:51:00.091 [main            ] INFO  AiClientToolMcpNode    - Tool Stdio MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=mcp-server-elasticsearch, version=1.0.0], instructions=null]
25-09-07.17:51:00.091 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5007
25-09-07.17:51:00.091 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:51:00.198 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-09-07.17:51:00.198 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-09-07.17:51:00.200 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2003
25-09-07.17:51:00.200 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:51:00.204 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-09-07.17:51:00.204 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:51:00.294 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-09-07.17:51:00.374 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-09-07.17:51:00.441 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-09-07.17:51:00.442 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-09-07.17:51:00.443 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_4101
25-09-07.17:51:00.445 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_4102
25-09-07.17:51:00.446 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_4103
25-09-07.17:51:00.446 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_4104
25-09-07.17:51:00.446 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成
25-09-07.17:51:16.364 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-07.17:51:16.366 [pool-7-thread-1 ] INFO  StdioClientTransport   - STDERR Message received: npm notice
25-09-07.17:51:16.366 [pool-7-thread-1 ] INFO  StdioClientTransport   - STDERR Message received: npm notice New major version of npm available! 10.9.3 -> 11.6.0
25-09-07.17:51:16.366 [pool-7-thread-1 ] INFO  StdioClientTransport   - STDERR Message received: npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.6.0
25-09-07.17:51:16.366 [pool-7-thread-1 ] INFO  StdioClientTransport   - STDERR Message received: npm notice To update run: npm install -g npm@11.6.0
25-09-07.17:51:16.366 [pool-7-thread-1 ] INFO  StdioClientTransport   - STDERR Message received: npm notice
25-09-07.17:51:16.366 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-07.17:51:16.370 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-09-07.17:51:16.374 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-09-07.17:52:55.957 [main            ] INFO  Application            - Starting Application using Java 17.0.9 with PID 5519 (/Users/didi/IdeaProjects/ai-agent-station-study/ai-agent-station-study-app/target/classes started by didi in /Users/didi/IdeaProjects/ai-agent-station-study)
25-09-07.17:52:55.957 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-07.17:52:56.593 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-07.17:52:56.598 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-07.17:52:56.599 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-07.17:52:56.599 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-07.17:52:56.623 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-07.17:52:56.623 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 649 ms
25-09-07.17:52:57.019 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-07.17:52:57.021 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-07.17:52:57.021 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-07.17:52:57.121 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-07.17:52:57.238 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-07.17:52:57.242 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-07.17:52:57.246 [main            ] INFO  Application            - Started Application in 1.504 seconds (process running for 2.09)
25-09-07.17:52:57.247 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-07.17:52:57.247 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:52:57.249 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:52:57.249 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:52:57.249 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:52:57.249 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:52:57.249 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:52:57.249 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-07.17:52:57.256 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-07.17:52:57.328 [pool-2-thread-3 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@1ea87c11
25-09-07.17:52:57.328 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-07.17:52:57.447 [main            ] INFO  RootNode               - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:52:57.447 [main            ] INFO  AiClientApiNode        - Ai Agent 构建节点，API 接口请求{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:52:57.448 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-09-07.17:52:57.448 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:52:57.751 [HttpClient-10-Worker-0] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-09-07.17:52:57.873 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-09-07.17:52:57.874 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-09-07.17:52:59.413 [pool-4-thread-1 ] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], Info: Implementation[name=mcp-server-elasticsearch, version=1.0.0] and Instructions null
25-09-07.17:52:59.413 [main            ] INFO  AiClientToolMcpNode    - Tool Stdio MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental=null, logging=null, prompts=null, resources=null, tools=ToolCapabilities[listChanged=null]], serverInfo=Implementation[name=mcp-server-elasticsearch, version=1.0.0], instructions=null]
25-09-07.17:52:59.413 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5007
25-09-07.17:52:59.413 [main            ] INFO  AiClientModelNode      - Ai Agent 构建节点，Mode 对话模型{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:52:59.532 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2002
25-09-07.17:52:59.532 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2001
25-09-07.17:52:59.535 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_model_2003
25-09-07.17:52:59.536 [main            ] INFO  AiClientAdvisorNode    - Ai Agent 构建节点，Advisor 顾问角色{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:52:59.539 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_advisor_4001
25-09-07.17:52:59.539 [main            ] INFO  AiClientNode           - Ai Agent 构建节点，客户端{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-07.17:52:59.654 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3101
25-09-07.17:52:59.727 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3102
25-09-07.17:52:59.804 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3103
25-09-07.17:52:59.804 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_3104
25-09-07.17:52:59.809 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_4101
25-09-07.17:52:59.812 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_4102
25-09-07.17:52:59.815 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_4103
25-09-07.17:52:59.815 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_4104
25-09-07.17:52:59.815 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配完成
25-09-07.17:54:48.394 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-07.17:54:48.396 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-07.17:54:48.399 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-09-07.17:54:48.403 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-09-11.17:03:21.399 [main            ] INFO  Application            - Starting Application using Java 21.0.2 with PID 17128 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.17:03:21.401 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.17:03:23.229 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.17:03:23.231 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.17:03:23.231 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.17:03:23.233 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.17:03:23.240 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.17:03:23.241 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.17:03:23.241 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.17:03:23.295 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.17:03:23.295 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1861 ms
25-09-11.17:03:24.155 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.17:03:24.159 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.17:03:24.159 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.17:03:24.300 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.17:03:24.546 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.17:03:24.553 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.17:03:24.558 [main            ] INFO  Application            - Started Application in 3.863 seconds (process running for 5.104)
25-09-11.17:03:24.559 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.17:03:24.560 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:03:24.561 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:03:24.561 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:03:24.561 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:03:24.561 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:03:24.561 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:03:24.562 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:03:24.575 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:03:24.758 [pool-2-thread-1 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@2e4e26da
25-09-11.17:03:24.759 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-11.17:03:24.883 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
java.util.concurrent.CompletionException: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Table 'ai-agent-station.ai_client_config' doesn't exist
### The error may exist in file [F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes\mybatis\mapper\ai_client_config_mapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT id, source_type, source_id, target_type, target_id, ext_param, status, create_time, update_time         FROM ai_client_config         WHERE source_type = ? AND source_id = ?
### Cause: java.sql.SQLSyntaxErrorException: Table 'ai-agent-station.ai_client_config' doesn't exist
; bad SQL grammar []
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Table 'ai-agent-station.ai_client_config' doesn't exist
### The error may exist in file [F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes\mybatis\mapper\ai_client_config_mapper.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT id, source_type, source_id, target_type, target_id, ext_param, status, create_time, update_time         FROM ai_client_config         WHERE source_type = ? AND source_id = ?
### Cause: java.sql.SQLSyntaxErrorException: Table 'ai-agent-station.ai_client_config' doesn't exist
; bad SQL grammar []
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:246)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:107)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:93)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy84.queryBySourceTypeAndId(Unknown Source)
	at cn.bugstack.ai.infrastructure.adapter.repository.AgentRepository.queryAiClientApiVOListByClientIds(AgentRepository.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at cn.bugstack.ai.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.queryAiClientApiVOListByClientIds(<generated>)
	at cn.bugstack.ai.domain.agent.service.armory.business.data.impl.AiClientLoadDataStrategy.lambda$loadData$0(AiClientLoadDataStrategy.java:40)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	... 3 common frames omitted
Caused by: java.sql.SQLSyntaxErrorException: Table 'ai-agent-station.ai_client_config' doesn't exist
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 22 common frames omitted
25-09-11.17:04:12.314 [main            ] INFO  Application            - Starting Application using Java 21.0.2 with PID 22016 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.17:04:12.315 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.17:04:13.188 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.17:04:13.189 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.17:04:13.190 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.17:04:13.191 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.17:04:13.198 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.17:04:13.199 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.17:04:13.199 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.17:04:13.250 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.17:04:13.250 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 908 ms
25-09-11.17:04:13.897 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.17:04:13.901 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.17:04:13.901 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.17:04:14.036 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.17:04:14.269 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.17:04:14.276 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.17:04:14.280 [main            ] INFO  Application            - Started Application in 2.335 seconds (process running for 2.824)
25-09-11.17:04:14.282 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.17:04:14.282 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:04:14.284 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:04:14.284 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:04:14.284 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:04:14.284 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:04:14.284 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:04:14.284 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:04:14.296 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:04:15.434 [pool-2-thread-6 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:04:15.443 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
java.util.concurrent.CompletionException: org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes\mybatis\mapper\ai_client_config_mapper.xml]
### The error may involve cn.bugstack.ai.infrastructure.dao.IAiClientConfigDao.queryBySourceTypeAndId
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes\mybatis\mapper\ai_client_config_mapper.xml]
### The error may involve cn.bugstack.ai.infrastructure.dao.IAiClientConfigDao.queryBySourceTypeAndId
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy84.queryBySourceTypeAndId(Unknown Source)
	at cn.bugstack.ai.infrastructure.adapter.repository.AgentRepository.queryAiClientApiVOListByClientIds(AgentRepository.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at cn.bugstack.ai.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.queryAiClientApiVOListByClientIds(<generated>)
	at cn.bugstack.ai.domain.agent.service.armory.business.data.impl.AiClientLoadDataStrategy.lambda$loadData$0(AiClientLoadDataStrategy.java:40)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	... 3 common frames omitted
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes\mybatis\mapper\ai_client_config_mapper.xml]
### The error may involve cn.bugstack.ai.infrastructure.dao.IAiClientConfigDao.queryBySourceTypeAndId
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 22 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:77)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:64)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 27 common frames omitted
Caused by: java.sql.SQLSyntaxErrorException: Identifier name 'ai-agent-station_01useunicode=true&characterencoding=utf8&autoreconnect=true&zerodatetimebehavior=co' is too long
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:829)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:449)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:242)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 37 common frames omitted
25-09-11.17:04:16.461 [pool-2-thread-4 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:04:17.471 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:04:18.490 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:04:19.520 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:05:59.900 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-11.17:05:59.904 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-11.17:06:03.191 [main            ] INFO  Application            - Starting Application using Java 21.0.2 with PID 13876 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.17:06:03.192 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.17:06:04.044 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.17:06:04.046 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.17:06:04.047 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.17:06:04.048 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.17:06:04.055 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.17:06:04.055 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.17:06:04.056 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.17:06:04.102 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.17:06:04.102 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 884 ms
25-09-11.17:06:04.743 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.17:06:04.747 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.17:06:04.747 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.17:06:04.885 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.17:06:05.104 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.17:06:05.110 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.17:06:05.115 [main            ] INFO  Application            - Started Application in 2.312 seconds (process running for 2.768)
25-09-11.17:06:05.116 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.17:06:05.117 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:06:05.118 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:06:05.119 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:06:05.119 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:06:05.119 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:06:05.119 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:06:05.119 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:06:05.131 [pool-2-thread-4 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:06:06.277 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:06:07.304 [pool-2-thread-6 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:06:08.320 [pool-2-thread-5 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:06:09.348 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:06:10.369 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:06:11.390 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
java.util.concurrent.CompletionException: org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes\mybatis\mapper\ai_client_config_mapper.xml]
### The error may involve cn.bugstack.ai.infrastructure.dao.IAiClientConfigDao.queryBySourceTypeAndId
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1770)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.mybatis.spring.MyBatisSystemException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes\mybatis\mapper\ai_client_config_mapper.xml]
### The error may involve cn.bugstack.ai.infrastructure.dao.IAiClientConfigDao.queryBySourceTypeAndId
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:99)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:347)
	at jdk.proxy2/jdk.proxy2.$Proxy78.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:194)
	at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:147)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:141)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)
	at jdk.proxy2/jdk.proxy2.$Proxy84.queryBySourceTypeAndId(Unknown Source)
	at cn.bugstack.ai.infrastructure.adapter.repository.AgentRepository.queryAiClientApiVOListByClientIds(AgentRepository.java:72)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:138)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727)
	at cn.bugstack.ai.infrastructure.adapter.repository.AgentRepository$$SpringCGLIB$$0.queryAiClientApiVOListByClientIds(<generated>)
	at cn.bugstack.ai.domain.agent.service.armory.business.data.impl.AiClientLoadDataStrategy.lambda$loadData$0(AiClientLoadDataStrategy.java:40)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768)
	... 3 common frames omitted
Caused by: org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
### The error may exist in file [F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes\mybatis\mapper\ai_client_config_mapper.xml]
### The error may involve cn.bugstack.ai.infrastructure.dao.IAiClientConfigDao.queryBySourceTypeAndId
### The error occurred while executing a query
### Cause: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.apache.ibatis.exceptions.ExceptionFactory.wrapException(ExceptionFactory.java:30)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:156)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:333)
	... 22 common frames omitted
Caused by: org.springframework.jdbc.CannotGetJdbcConnectionException: Failed to obtain JDBC Connection
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:84)
	at org.mybatis.spring.transaction.SpringManagedTransaction.openConnection(SpringManagedTransaction.java:77)
	at org.mybatis.spring.transaction.SpringManagedTransaction.getConnection(SpringManagedTransaction.java:64)
	at org.apache.ibatis.executor.BaseExecutor.getConnection(BaseExecutor.java:348)
	at org.apache.ibatis.executor.SimpleExecutor.prepareStatement(SimpleExecutor.java:89)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:64)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:110)
	at org.apache.ibatis.executor.CachingExecutor.query(CachingExecutor.java:90)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	... 27 common frames omitted
Caused by: java.sql.SQLSyntaxErrorException: Identifier name 'ai-agent-station_01useunicode=true&characterencoding=utf8&autoreconnect=true&zerodatetimebehavior=co' is too long
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:829)
	at com.mysql.cj.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:449)
	at com.mysql.cj.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:242)
	at com.mysql.cj.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:198)
	at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:137)
	at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:360)
	at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:202)
	at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:461)
	at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:550)
	at com.zaxxer.hikari.pool.HikariPool.<init>(HikariPool.java:98)
	at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:111)
	at org.springframework.jdbc.datasource.DataSourceUtils.fetchConnection(DataSourceUtils.java:160)
	at org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection(DataSourceUtils.java:118)
	at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:81)
	... 37 common frames omitted
25-09-11.17:07:07.014 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-11.17:07:07.017 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-11.17:07:17.205 [main            ] INFO  Application            - Starting Application using Java 21.0.2 with PID 5824 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.17:07:17.206 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.17:07:18.069 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.17:07:18.071 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.17:07:18.071 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.17:07:18.072 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.17:07:18.079 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.17:07:18.080 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.17:07:18.080 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.17:07:18.130 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.17:07:18.131 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 898 ms
25-09-11.17:07:18.768 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.17:07:18.771 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.17:07:18.771 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.17:07:18.904 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.17:07:19.122 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.17:07:19.129 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.17:07:19.134 [main            ] INFO  Application            - Started Application in 2.322 seconds (process running for 2.793)
25-09-11.17:07:19.136 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.17:07:19.136 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:07:19.138 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:07:19.138 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:07:19.138 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:07:19.138 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:07:19.138 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:07:19.139 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:07:19.152 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:07:19.281 [pool-2-thread-2 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@109eef06
25-09-11.17:07:19.282 [pool-2-thread-2 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-11.17:07:19.479 [main            ] INFO  RootNode               - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:07:19.479 [main            ] INFO  AiClientApiNode        - Ai Agent 构建节点，API 接口请求{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:07:19.482 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-09-11.17:07:19.482 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:07:29.532 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
io.modelcontextprotocol.spec.McpError: Failed to wait for the message endpoint
	at io.modelcontextprotocol.client.transport.HttpClientSseClientTransport.sendMessage(HttpClientSseClientTransport.java:403)
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$9(McpClientSession.java:237)
	at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:61)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.Mono.block(Mono.java:1778)
	at io.modelcontextprotocol.client.McpSyncClient.initialize(McpSyncClient.java:171)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.createMcpSyncClient(AiClientToolMcpNode.java:101)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:49)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:29)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:53)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:22)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:44)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:75)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:28)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at cn.bugstack.ai.Application.main(Application.java:12)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		... 31 common frames omitted
25-09-11.17:07:29.659 [ForkJoinPool.commonPool-worker-1] ERROR HttpClientSseClientTransport - SSE connection error
java.util.concurrent.CompletionException: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.base/java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:368)
	at java.base/java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:377)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1152)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2194)
	at java.net.http/jdk.internal.net.http.Http1Exchange.lambda$cancelImpl$9(Http1Exchange.java:592)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:585)
	at java.net.http/jdk.internal.net.http.MultiExchange.getExceptionalCF(MultiExchange.java:532)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:452)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	... 6 common frames omitted
Caused by: java.net.ConnectException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:586)
	... 10 common frames omitted
25-09-11.17:07:29.659 [ForkJoinPool.commonPool-worker-1] ERROR Operators              - Operator called default onErrorDropped
reactor.core.Exceptions$ErrorCallbackNotImplemented: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
Caused by: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:585)
	at java.net.http/jdk.internal.net.http.MultiExchange.getExceptionalCF(MultiExchange.java:532)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:452)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2194)
	at java.net.http/jdk.internal.net.http.Http1Exchange.lambda$cancelImpl$9(Http1Exchange.java:592)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:586)
	... 10 common frames omitted
25-09-11.17:11:07.577 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-11.17:11:07.580 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-11.17:11:07.583 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-09-11.17:11:07.586 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-09-11.17:11:10.870 [main            ] INFO  Application            - Starting Application using Java 21.0.2 with PID 21596 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.17:11:10.871 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.17:11:11.723 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.17:11:11.725 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.17:11:11.725 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.17:11:11.727 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.17:11:11.733 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.17:11:11.734 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.17:11:11.734 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.17:11:11.786 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.17:11:11.786 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 888 ms
25-09-11.17:11:12.412 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.17:11:12.416 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.17:11:12.416 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.17:11:12.553 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.17:11:12.776 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.17:11:12.782 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.17:11:12.787 [main            ] INFO  Application            - Started Application in 2.268 seconds (process running for 2.71)
25-09-11.17:11:12.788 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.17:11:12.788 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:11:12.790 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:11:12.790 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:11:12.790 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:11:12.790 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:11:12.790 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:11:12.790 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:11:12.802 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:11:12.934 [pool-2-thread-3 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@78aae0b6
25-09-11.17:11:12.935 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-11.17:11:13.109 [main            ] INFO  RootNode               - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:11:13.110 [main            ] INFO  AiClientApiNode        - Ai Agent 构建节点，API 接口请求{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:11:13.113 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-09-11.17:11:13.113 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:11:23.161 [ForkJoinPool.commonPool-worker-1] ERROR HttpClientSseClientTransport - SSE connection error
java.util.concurrent.CompletionException: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.base/java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:368)
	at java.base/java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:377)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1152)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2194)
	at java.net.http/jdk.internal.net.http.Http1Exchange.lambda$cancelImpl$9(Http1Exchange.java:592)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:585)
	at java.net.http/jdk.internal.net.http.MultiExchange.getExceptionalCF(MultiExchange.java:532)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:452)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	... 6 common frames omitted
Caused by: java.net.ConnectException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:586)
	... 10 common frames omitted
25-09-11.17:11:23.167 [ForkJoinPool.commonPool-worker-1] ERROR Operators              - Operator called default onErrorDropped
reactor.core.Exceptions$ErrorCallbackNotImplemented: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
Caused by: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:585)
	at java.net.http/jdk.internal.net.http.MultiExchange.getExceptionalCF(MultiExchange.java:532)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:452)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2194)
	at java.net.http/jdk.internal.net.http.Http1Exchange.lambda$cancelImpl$9(Http1Exchange.java:592)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:586)
	... 10 common frames omitted
25-09-11.17:11:23.167 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
io.modelcontextprotocol.spec.McpError: Failed to wait for the message endpoint
	at io.modelcontextprotocol.client.transport.HttpClientSseClientTransport.sendMessage(HttpClientSseClientTransport.java:403)
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$9(McpClientSession.java:237)
	at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:61)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.Mono.block(Mono.java:1778)
	at io.modelcontextprotocol.client.McpSyncClient.initialize(McpSyncClient.java:171)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.createMcpSyncClient(AiClientToolMcpNode.java:101)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:49)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:29)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:53)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:22)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:44)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:75)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:28)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at cn.bugstack.ai.Application.main(Application.java:12)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		... 31 common frames omitted
25-09-11.17:14:26.574 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-11.17:14:26.577 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-11.17:14:26.580 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-09-11.17:14:26.584 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-09-11.17:14:31.159 [main            ] INFO  Application            - Starting Application using Java 21.0.2 with PID 13984 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.17:14:31.160 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.17:14:32.055 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.17:14:32.057 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.17:14:32.057 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.17:14:32.059 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.17:14:32.065 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.17:14:32.066 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.17:14:32.066 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.17:14:32.120 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.17:14:32.120 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 932 ms
25-09-11.17:14:32.748 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.17:14:32.751 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.17:14:32.751 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.17:14:32.889 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.17:14:33.115 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.17:14:33.121 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.17:14:33.126 [main            ] INFO  Application            - Started Application in 2.359 seconds (process running for 2.825)
25-09-11.17:14:33.128 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.17:14:33.128 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:14:33.130 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:14:33.130 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:14:33.130 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:14:33.130 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:14:33.130 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:14:33.130 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:14:33.142 [pool-2-thread-6 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:14:33.283 [pool-2-thread-6 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@7a558580
25-09-11.17:14:33.283 [pool-2-thread-6 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-11.17:14:33.445 [main            ] INFO  RootNode               - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:14:33.446 [main            ] INFO  AiClientApiNode        - Ai Agent 构建节点，API 接口请求{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:14:33.449 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-09-11.17:14:33.450 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:14:43.495 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
io.modelcontextprotocol.spec.McpError: Failed to wait for the message endpoint
	at io.modelcontextprotocol.client.transport.HttpClientSseClientTransport.sendMessage(HttpClientSseClientTransport.java:403)
	at io.modelcontextprotocol.spec.McpClientSession.lambda$sendRequest$9(McpClientSession.java:237)
	at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:61)
	at reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55)
	at reactor.core.publisher.Mono.subscribe(Mono.java:4576)
	at reactor.core.publisher.Mono.block(Mono.java:1778)
	at io.modelcontextprotocol.client.McpSyncClient.initialize(McpSyncClient.java:171)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.createMcpSyncClient(AiClientToolMcpNode.java:101)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:49)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:29)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:53)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:22)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:44)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:75)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:28)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at cn.bugstack.ai.Application.main(Application.java:12)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		at reactor.core.publisher.Mono.block(Mono.java:1779)
		... 31 common frames omitted
25-09-11.17:14:43.503 [ForkJoinPool.commonPool-worker-1] ERROR HttpClientSseClientTransport - SSE connection error
java.util.concurrent.CompletionException: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.base/java.util.concurrent.CompletableFuture.encodeRelay(CompletableFuture.java:368)
	at java.base/java.util.concurrent.CompletableFuture.completeRelay(CompletableFuture.java:377)
	at java.base/java.util.concurrent.CompletableFuture$UniCompose.tryFire(CompletableFuture.java:1152)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2194)
	at java.net.http/jdk.internal.net.http.Http1Exchange.lambda$cancelImpl$9(Http1Exchange.java:592)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:585)
	at java.net.http/jdk.internal.net.http.MultiExchange.getExceptionalCF(MultiExchange.java:532)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:452)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	... 6 common frames omitted
Caused by: java.net.ConnectException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:586)
	... 10 common frames omitted
25-09-11.17:14:43.504 [ForkJoinPool.commonPool-worker-1] ERROR Operators              - Operator called default onErrorDropped
reactor.core.Exceptions$ErrorCallbackNotImplemented: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
Caused by: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:585)
	at java.net.http/jdk.internal.net.http.MultiExchange.getExceptionalCF(MultiExchange.java:532)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:452)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2194)
	at java.net.http/jdk.internal.net.http.Http1Exchange.lambda$cancelImpl$9(Http1Exchange.java:592)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:586)
	... 10 common frames omitted
25-09-11.17:16:41.818 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-11.17:16:41.821 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-11.17:16:41.823 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-09-11.17:16:41.827 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-09-11.17:25:14.142 [main            ] INFO  Application            - Starting Application using Java 17.0.16 with PID 17128 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.17:25:14.143 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.17:25:15.064 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.17:25:15.066 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.17:25:15.066 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.17:25:15.069 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.17:25:15.078 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.17:25:15.079 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.17:25:15.079 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.17:25:15.139 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.17:25:15.139 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 966 ms
25-09-11.17:25:15.787 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.17:25:15.813 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.17:25:15.813 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.17:25:15.919 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.17:25:16.154 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.17:25:16.162 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.17:25:16.168 [main            ] INFO  Application            - Started Application in 2.455 seconds (process running for 2.923)
25-09-11.17:25:16.169 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.17:25:16.169 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:25:16.171 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:25:16.171 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:25:16.171 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:25:16.171 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:25:16.171 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:25:16.172 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.17:25:16.183 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.17:25:16.289 [pool-2-thread-3 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@e61eca4
25-09-11.17:25:16.290 [pool-2-thread-3 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-11.17:25:16.473 [main            ] INFO  RootNode               - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:25:16.473 [main            ] INFO  AiClientApiNode        - Ai Agent 构建节点，API 接口请求{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:25:16.477 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-09-11.17:25:16.477 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.17:25:26.810 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
reactor.core.Exceptions$ReactiveException: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at io.modelcontextprotocol.client.McpSyncClient.initialize(McpSyncClient.java:171)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.createMcpSyncClient(AiClientToolMcpNode.java:101)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:49)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:29)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:53)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:22)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:44)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:75)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:28)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at cn.bugstack.ai.Application.main(Application.java:12)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 32 common frames omitted
Caused by: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:580)
	at java.net.http/jdk.internal.net.http.MultiExchange.getExceptionalCF(MultiExchange.java:527)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:447)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.Http1Exchange.lambda$cancelImpl$9(Http1Exchange.java:492)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.net.ConnectException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:581)
	... 10 common frames omitted
25-09-11.18:25:16.653 [HttpClient-10-Worker-1] ERROR HttpClientSseClientTransport - SSE connection error
java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.net.http/jdk.internal.net.http.common.Utils.wrapWithExtraDetail(Utils.java:375)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:760)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(Http1AsyncReceiver.java:302)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:268)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.io.EOFException: EOF reached while reading
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver$Http1TubeSubscriber.onComplete(Http1AsyncReceiver.java:596)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadSubscription.signalCompletion(SocketTube.java:640)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.read(SocketTube.java:845)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowTask.run(SocketTube.java:181)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.signalReadable(SocketTube.java:774)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadEvent.signalEvent(SocketTube.java:957)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowEvent.handle(SocketTube.java:253)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:984)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:939)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:939)
25-09-11.18:25:16.655 [ForkJoinPool.commonPool-worker-2] ERROR HttpClientSseClientTransport - SSE connection error
java.util.concurrent.CompletionException: java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:332)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:347)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:874)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.ResponseSubscribers.lambda$getBodyAsync$2(ResponseSubscribers.java:1155)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter$LineSubscription.loop(LineSubscriberAdapter.java:410)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter$LineSubscription.signalError(LineSubscriberAdapter.java:199)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter.onError(LineSubscriberAdapter.java:105)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.propagateError(Http1Response.java:327)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.complete(Http1Response.java:356)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.onError(Http1Response.java:386)
	at java.net.http/jdk.internal.net.http.Http1Response.lambda$readBody$2(Http1Response.java:468)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.Http1Response.onReadError(Http1Response.java:554)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:761)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(Http1AsyncReceiver.java:302)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:268)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.net.http/jdk.internal.net.http.common.Utils.wrapWithExtraDetail(Utils.java:375)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:760)
	... 8 common frames omitted
Caused by: java.io.EOFException: EOF reached while reading
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver$Http1TubeSubscriber.onComplete(Http1AsyncReceiver.java:596)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadSubscription.signalCompletion(SocketTube.java:640)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.read(SocketTube.java:845)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowTask.run(SocketTube.java:181)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.signalReadable(SocketTube.java:774)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadEvent.signalEvent(SocketTube.java:957)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowEvent.handle(SocketTube.java:253)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:984)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:939)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:939)
25-09-11.21:11:23.659 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-11.21:11:23.703 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-11.21:11:23.708 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-09-11.21:11:23.710 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-09-11.22:20:24.918 [main            ] INFO  Application            - Starting Application using Java 17.0.16 with PID 26912 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.22:20:24.920 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.22:20:26.535 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.22:20:26.536 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.22:20:26.537 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.22:20:26.539 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.22:20:26.546 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.22:20:26.547 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.22:20:26.547 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.22:20:26.622 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.22:20:26.622 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1678 ms
25-09-11.22:20:27.413 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.22:20:27.417 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.22:20:27.417 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.22:20:27.552 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.22:20:27.795 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.22:20:27.802 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.22:20:27.808 [main            ] INFO  Application            - Started Application in 3.219 seconds (process running for 10.382)
25-09-11.22:20:27.810 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.22:20:27.810 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:20:27.820 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:20:27.820 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:20:27.820 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:20:27.820 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:20:27.820 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:20:27.820 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:20:27.839 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.22:20:27.988 [pool-2-thread-1 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@2b947b01
25-09-11.22:20:27.989 [pool-2-thread-1 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-11.22:20:28.208 [main            ] INFO  RootNode               - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.22:20:28.208 [main            ] INFO  AiClientApiNode        - Ai Agent 构建节点，API 接口请求{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.22:20:28.211 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-09-11.22:20:28.211 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.22:20:28.687 [HttpClient-10-Worker-2] INFO  McpAsyncClient         - Server response with Protocol: 2024-11-05, Capabilities: ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], Info: Implementation[name=AIsearch, version=1.4.1] and Instructions null
25-09-11.22:20:28.799 [main            ] INFO  AiClientToolMcpNode    - Tool SSE MCP Initialized InitializeResult[protocolVersion=2024-11-05, capabilities=ServerCapabilities[completions=null, experimental={}, logging=null, prompts=PromptCapabilities[listChanged=false], resources=ResourceCapabilities[subscribe=false, listChanged=false], tools=ToolCapabilities[listChanged=false]], serverInfo=Implementation[name=AIsearch, version=1.4.1], instructions=null]
25-09-11.22:20:28.803 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_tool_mcp_5006
25-09-11.22:20:28.820 [boundedElastic-1] ERROR Operators              - Operator called default onErrorDropped
reactor.core.Exceptions$ErrorCallbackNotImplemented: java.lang.RuntimeException: Failed to start process with command: [npx, -y, @awesome-ai/elasticsearch-mcp]
Caused by: java.lang.RuntimeException: Failed to start process with command: [npx, -y, @awesome-ai/elasticsearch-mcp]
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$connect$1(StdioClientTransport.java:132)
	at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:73)
	at reactor.core.publisher.MonoRunnable.call(MonoRunnable.java:32)
	at reactor.core.publisher.FluxSubscribeOnCallable$CallableSubscribeOnSubscription.run(FluxSubscribeOnCallable.java:228)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.io.IOException: Cannot run program "npx": CreateProcess error=2, 系统找不到指定的文件。
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1143)
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1073)
	at io.modelcontextprotocol.client.transport.StdioClientTransport.lambda$connect$1(StdioClientTransport.java:129)
	... 10 common frames omitted
Caused by: java.io.IOException: CreateProcess error=2, 系统找不到指定的文件。
	at java.base/java.lang.ProcessImpl.create(Native Method)
	at java.base/java.lang.ProcessImpl.<init>(ProcessImpl.java:505)
	at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:158)
	at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1110)
	... 12 common frames omitted
25-09-11.22:23:28.820 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
reactor.core.Exceptions$ReactiveException: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 180000ms in 'source(MonoDeferContextual)' (and no fallback has been configured)
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at io.modelcontextprotocol.client.McpSyncClient.initialize(McpSyncClient.java:171)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.createMcpSyncClient(AiClientToolMcpNode.java:119)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:49)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:29)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:53)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:22)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:44)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:75)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:28)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at cn.bugstack.ai.Application.main(Application.java:12)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 32 common frames omitted
Caused by: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 180000ms in 'source(MonoDeferContextual)' (and no fallback has been configured)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.handleTimeout(FluxTimeout.java:296)
	at reactor.core.publisher.FluxTimeout$TimeoutMainSubscriber.doTimeout(FluxTimeout.java:281)
	at reactor.core.publisher.FluxTimeout$TimeoutTimeoutSubscriber.onNext(FluxTimeout.java:420)
	at reactor.core.publisher.FluxOnErrorReturn$ReturnSubscriber.onNext(FluxOnErrorReturn.java:162)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.propagateDelay(MonoDelay.java:270)
	at reactor.core.publisher.MonoDelay$MonoDelayRunnable.run(MonoDelay.java:285)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:68)
	at reactor.core.scheduler.SchedulerTask.call(SchedulerTask.java:28)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
25-09-11.22:48:19.428 [SpringApplicationShutdownHook] INFO  GracefulShutdown       - Commencing graceful shutdown. Waiting for active requests to complete
25-09-11.22:48:19.473 [tomcat-shutdown ] INFO  GracefulShutdown       - Graceful shutdown complete
25-09-11.22:48:19.477 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown initiated...
25-09-11.22:48:19.482 [SpringApplicationShutdownHook] INFO  HikariDataSource       - MainHikariPool - Shutdown completed.
25-09-11.22:48:26.980 [main            ] INFO  Application            - Starting Application using Java 17.0.16 with PID 26220 (F:\Code\AI-agent-based-on-Chat-GPT\ai-agent-station-study-app\target\classes started by 海上琴师 in F:\Code\AI-agent-based-on-Chat-GPT)
25-09-11.22:48:26.982 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-09-11.22:48:27.917 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port 8099 (http)
25-09-11.22:48:27.919 [main            ] INFO  AprLifecycleListener   - An older version [1.2.38] of the Apache Tomcat Native library is installed, while Tomcat recommends a minimum version of [2.0.5]
25-09-11.22:48:27.919 [main            ] INFO  AprLifecycleListener   - Loaded Apache Tomcat Native library [1.2.38] using APR version [1.7.4].
25-09-11.22:48:27.921 [main            ] INFO  AprLifecycleListener   - OpenSSL successfully initialized [OpenSSL 1.1.1v  1 Aug 2023]
25-09-11.22:48:27.929 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8099"]
25-09-11.22:48:27.931 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-09-11.22:48:27.931 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/10.1.36]
25-09-11.22:48:27.985 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-09-11.22:48:27.985 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 977 ms
25-09-11.22:48:28.679 [main            ] INFO  PgVectorStore          - Using the vector table name: vector_store. Is empty: false
25-09-11.22:48:28.682 [main            ] INFO  PgVectorStore          - Initializing PGVectorStore schema for table: vector_store in schema: public
25-09-11.22:48:28.682 [main            ] INFO  PgVectorStore          - vectorTableValidationsEnabled false
25-09-11.22:48:28.809 [main            ] INFO  OptionalValidatorFactoryBean - Failed to set up a Bean Validation provider: jakarta.validation.NoProviderFoundException: Unable to create a Configuration, because no Jakarta Bean Validation provider could be found. Add a provider like Hibernate Validator (RI) to your classpath.
25-09-11.22:48:29.017 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8099"]
25-09-11.22:48:29.024 [main            ] INFO  TomcatWebServer        - Tomcat started on port 8099 (http) with context path '/'
25-09-11.22:48:29.030 [main            ] INFO  Application            - Started Application in 2.46 seconds (process running for 2.969)
25-09-11.22:48:29.031 [main            ] INFO  AiAgentAutoConfiguration - AI Agent 自动装配开始，配置: AiAgentAutoConfigProperties(enabled=true, clientIds=[3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104])
25-09-11.22:48:29.032 [main            ] INFO  AiAgentAutoConfiguration - 开始自动装配AI客户端，客户端ID列表: [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:48:29.033 [pool-2-thread-1 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_api) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:48:29.033 [pool-2-thread-2 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_model) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:48:29.033 [pool-2-thread-3 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_tool_mcp) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:48:29.033 [pool-2-thread-4 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_system_prompt) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:48:29.033 [pool-2-thread-5 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client_advisor) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:48:29.033 [pool-2-thread-6 ] INFO  AiClientLoadDataStrategy - 查询配置数据(ai_client) [3101, 3102, 3103, 3104, 4101, 4102, 4103, 4104]
25-09-11.22:48:29.056 [pool-2-thread-6 ] INFO  HikariDataSource       - MainHikariPool - Starting...
25-09-11.22:48:29.194 [pool-2-thread-6 ] INFO  HikariPool             - MainHikariPool - Added connection com.mysql.cj.jdbc.ConnectionImpl@4bff5538
25-09-11.22:48:29.195 [pool-2-thread-6 ] INFO  HikariDataSource       - MainHikariPool - Start completed.
25-09-11.22:48:29.369 [main            ] INFO  RootNode               - Ai Agent 构建，数据加载节点{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.22:48:29.369 [main            ] INFO  AiClientApiNode        - Ai Agent 构建节点，API 接口请求{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.22:48:29.373 [main            ] INFO  AbstractArmorySupport  - 成功注册Bean: ai_client_api_1001
25-09-11.22:48:29.373 [main            ] INFO  AiClientToolMcpNode    - Ai Agent 构建节点，Tool MCP 工具配置{"commandIdList":["3101","3102","3103","3104","4101","4102","4103","4104"],"commandType":"client","loadDataStrategy":"aiClientLoadDataStrategy"}
25-09-11.22:48:39.737 [main            ] ERROR AiAgentAutoConfiguration - AI Agent 自动装配失败
reactor.core.Exceptions$ReactiveException: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at reactor.core.Exceptions.propagate(Exceptions.java:410)
	at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:102)
	at reactor.core.publisher.Mono.block(Mono.java:1779)
	at io.modelcontextprotocol.client.McpSyncClient.initialize(McpSyncClient.java:171)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.createMcpSyncClient(AiClientToolMcpNode.java:101)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:49)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientToolMcpNode.doApply(AiClientToolMcpNode.java:29)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:53)
	at cn.bugstack.ai.domain.agent.service.armory.AiClientApiNode.doApply(AiClientApiNode.java:22)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:22)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:44)
	at cn.bugstack.ai.domain.agent.service.armory.RootNode.doApply(RootNode.java:21)
	at cn.bugstack.wrench.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:31)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:75)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration.onApplicationEvent(AiAgentAutoConfiguration.java:28)
	at cn.bugstack.ai.config.AiAgentAutoConfiguration$$SpringCGLIB$$0.onApplicationEvent(<generated>)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.boot.context.event.EventPublishingRunListener.ready(EventPublishingRunListener.java:109)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$ready$6(SpringApplicationRunListeners.java:80)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.ready(SpringApplicationRunListeners.java:80)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:332)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at cn.bugstack.ai.Application.main(Application.java:12)
	Suppressed: java.lang.Exception: #block terminated with an error
		at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:104)
		... 32 common frames omitted
Caused by: java.net.http.HttpConnectTimeoutException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:580)
	at java.net.http/jdk.internal.net.http.MultiExchange.getExceptionalCF(MultiExchange.java:527)
	at java.net.http/jdk.internal.net.http.MultiExchange.lambda$responseAsyncImpl$7(MultiExchange.java:447)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.Http1Exchange.lambda$cancelImpl$9(Http1Exchange.java:492)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.net.ConnectException: HTTP connect timed out
	at java.net.http/jdk.internal.net.http.MultiExchange.toTimeoutException(MultiExchange.java:581)
	... 10 common frames omitted
25-09-11.23:48:29.660 [HttpClient-10-Worker-0] ERROR HttpClientSseClientTransport - SSE connection error
java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.net.http/jdk.internal.net.http.common.Utils.wrapWithExtraDetail(Utils.java:375)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:760)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(Http1AsyncReceiver.java:302)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:268)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.io.EOFException: EOF reached while reading
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver$Http1TubeSubscriber.onComplete(Http1AsyncReceiver.java:596)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadSubscription.signalCompletion(SocketTube.java:640)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.read(SocketTube.java:845)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowTask.run(SocketTube.java:181)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.signalReadable(SocketTube.java:774)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadEvent.signalEvent(SocketTube.java:957)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowEvent.handle(SocketTube.java:253)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:984)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:939)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:939)
25-09-11.23:48:29.693 [ForkJoinPool.commonPool-worker-2] ERROR HttpClientSseClientTransport - SSE connection error
java.util.concurrent.CompletionException: java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:332)
	at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:347)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:874)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.ResponseSubscribers.lambda$getBodyAsync$2(ResponseSubscribers.java:1155)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter$LineSubscription.loop(LineSubscriberAdapter.java:410)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter$LineSubscription.signalError(LineSubscriberAdapter.java:199)
	at java.net.http/jdk.internal.net.http.LineSubscriberAdapter.onError(LineSubscriberAdapter.java:105)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.propagateError(Http1Response.java:327)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.complete(Http1Response.java:356)
	at java.net.http/jdk.internal.net.http.Http1Response$Http1BodySubscriber.onError(Http1Response.java:386)
	at java.net.http/jdk.internal.net.http.Http1Response.lambda$readBody$2(Http1Response.java:468)
	at java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)
	at java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(CompletableFuture.java:2162)
	at java.net.http/jdk.internal.net.http.Http1Response.onReadError(Http1Response.java:554)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:761)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(Http1AsyncReceiver.java:302)
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver.flush(Http1AsyncReceiver.java:268)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(SequentialScheduler.java:205)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(SequentialScheduler.java:149)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: java.io.IOException: chunked transfer encoding, state: READING_LENGTH
	at java.net.http/jdk.internal.net.http.common.Utils.wrapWithExtraDetail(Utils.java:375)
	at java.net.http/jdk.internal.net.http.Http1Response$BodyReader.onReadError(Http1Response.java:760)
	... 8 common frames omitted
Caused by: java.io.EOFException: EOF reached while reading
	at java.net.http/jdk.internal.net.http.Http1AsyncReceiver$Http1TubeSubscriber.onComplete(Http1AsyncReceiver.java:596)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadSubscription.signalCompletion(SocketTube.java:640)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.read(SocketTube.java:845)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowTask.run(SocketTube.java:181)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(SequentialScheduler.java:230)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:303)
	at java.net.http/jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(SequentialScheduler.java:256)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$InternalReadSubscription.signalReadable(SocketTube.java:774)
	at java.net.http/jdk.internal.net.http.SocketTube$InternalReadPublisher$ReadEvent.signalEvent(SocketTube.java:957)
	at java.net.http/jdk.internal.net.http.SocketTube$SocketFlowEvent.handle(SocketTube.java:253)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.handleEvent(HttpClientImpl.java:984)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.lambda$run$3(HttpClientImpl.java:939)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at java.net.http/jdk.internal.net.http.HttpClientImpl$SelectorManager.run(HttpClientImpl.java:939)
